<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testes no Console</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <div id="root" style="padding: 3em;"></div>
    <script rel="text/javascript" src="../matrizes.js"></script>
    <script>
        const mat = new Matrix(20, 20, document.getElementById("root"), 40);

        var center = {
            x: 5,
            y: 8
        }

        var point = {
            p1: {
                x1: 0,
                y1: 0
            },
            p2: {
                x2: 5,
                y2: 0
            },
            p3: {
                x3: 3,
                y3: 5
            }
        }

        var a = {
            a1: -(point.p2.y2 - point.p1.y1),
            a2: -(point.p3.y3 - point.p2.y2),
            a3: -(point.p1.y1 - point.p3.y3)
        }

        var b = {
            b1: point.p2.x2 - point.p1.x1,
            b2: point.p3.x3 - point.p2.x2,
            b3: point.p1.x1 - point.p3.x3
        }

        var c = {
            c1: -a.a1 * point.p1.x1 - b.b1 * point.p1.y1,
            c2: -a.a2 * point.p2.x2 - b.b2 * point.p2.y2,
            c3: -a.a3 * point.p3.x3 - b.b3 * point.p3.y3
        }

        // encontra bouding box do triÃ¢ngulo
        var x = {
            min: Math.min(point.p1.x1, point.p2.x2, point.p3.x3),
            max: Math.max(point.p1.x1, point.p2.x2, point.p3.x3)
        }

        var y = {
            min: Math.min(point.p1.y1, point.p2.y2, point.p3.y3),
            max: Math.max(point.p1.y1, point.p2.y2, point.p3.y3)
        }
        
        // calcula o erro inicial p/ o inicio do bounding box

        var error1 = a.a1 * x.min + b.b1 * y.min + c.c1;
        var error2 = a.a2 * x.min + b.b2 * y.min + c.c2;
        var error3 = a.a3 * x.min + b.b3 * y.min + c.c3;

        console.log("Primeiro ==>  y Min: " + y.min + " | y Max: " + y.max);
        for (let k = y.min; k <= y.max; k++) {

            let error1Aux = error1;
            let error2Aux = error2;
            let error3Aux = error3;
            
            console.log("Segundo ==> x Min: " + x.min + " | x Max: " + x.max);

            for (let j = x.min; j <= x.max; j++) {

                console.log("Erro1: " + error1 + " | Erro2: " + error2 + " | Erro3: " + error2)

                if (error1 >= 0 && error2 >= 0 && error3 >= 0) {

                    console.log("Pintando ponto ==> J: " + j + " | k: " + k);

                    mat.paint(j + center.x, k + center.y);
                }
            
                error1 += a.a1;
                error2 += a.a2;
                error3 += a.a3;
            }

            error1 = error1Aux + b.b1;
            error2 = error2Aux + b.b2;
            error3 = error3Aux + b.b3;
        }
        

    </script>
</body>
</html>
